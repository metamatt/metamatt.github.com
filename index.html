
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Step 2 is the hard part.</title>
  <meta name="author" content="Matt Ginzton">

  
  <meta name="description" content="I use email pretty seriously, and like a good thick client. I like what gmail is trying to do, but I&rsquo;ve never been able to get along with its &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.metamatt.com/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Step 2 is the hard part." type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-19563060-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Step 2 is the hard part.</a></h1>
  
    <h2>Matt Ginzton writes here.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.metamatt.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/08/mail-dot-app-gmail-and-mavericks/">Mail.app and Gmail in Mavericks</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-08T23:47:00-08:00" pubdate data-updated="true">Dec 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/08/mail-dot-app-gmail-and-mavericks/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I use email pretty seriously, and like a good thick client. I like what gmail is trying to do, but I&rsquo;ve never been able to get along with its web interface. My years-old mailstore has many folders, and emulating them with labels works fine but the gmail UI for assigning labels just isn&rsquo;t as good as what any decent thick client does with folders. So.</p>

<p>I see a lot of hate on the internet for <a href="http://en.wikipedia.org/wiki/Mail_(application">Mail.app</a>), but having tried many alternatives, I really like it<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>. Or did until <a href="http://en.wikipedia.org/wiki/OS_X_Mavericks">Mavericks</a>, which is the point of this post.</p>

<p>The Mavericks version of Mail.app made some big changes to how Mail.app talks to gimap, which I can only assume were to make things work better with gmail&rsquo;s &ldquo;labels&rdquo; system and the idea that unlike with folders, one message can be filed with multiple labels. Because it worked fine before Mavericks, at the cost of perhaps syncing multiple copies of the same message. However, immediately after the Mavericks release, <a href="https://tidbits.com/article/14219">it was well documented</a> that instead of making things better, they&rsquo;d made them worse.</p>

<p>In fact, it was bad enough that <a href="http://support.apple.com/kb/HT6030">Apple took the unusual step of releasing a Mail.app-Gmail specific update</a> only a few days later.</p>

<p>In my experience, it made things a little better but far from good; even after the update</p>

<ul>
<li>server-side changes (made in another client, or in the gmail web interface, or new mail arriving) may not be noticed for minutes, hours, days, or weeks, or at all</li>
<li>if I move messages between folders in Mail.app, the message disappears from the source folder, then reappears a couple seconds later, then disappears again a couple more seconds later</li>
<li>the &ldquo;Mailbox&rdquo; column in the message list view, which should show what folder a message is in, always shows &ldquo;All Mail&rdquo;, regardless of which more interesting folder(s) the message is actually in</li>
</ul>


<p>The 2nd and 3rd problems are annoying but cosmetic; the 1st problem, though, renders Mail.app entirely unusable. There doesn&rsquo;t seem to be any workaround &mdash; I&rsquo;ve tried switching folders many times, triggering Synchronize, triggering Rebuild Folder, logging out and logging back in, rebooting, quitting and restarting Mail, even deleting my entire mail cache folder and all accounts and re-adding the accounts and downloading all the mail again. Nothing helped.</p>

<p>Hopefully Apple will fix this soon (there are <a href="http://appleinsider.com/articles/13/11/21/apple-seeds-second-os-x-1091-beta-to-developers-with-mail-improvements">rumored to be further Mail.app/gmail bugfixes in an upcoming 10.9.1 update</a>). As it is, it means I either can&rsquo;t upgrade to Mavericks on the machine I actually care about<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>, or I need to find a different mail client.</p>

<p>So, in the past couple weeks I&rsquo;ve spent some time dabbling in alternate mail clients. I haven&rsquo;t found one I like.</p>

<p><a href="http://www.postbox-inc.com/">Postbox</a>:</p>

<ul>
<li>Works well enough from a strict functionality point of view, but has enough minor problems I still prefer the OS X 10.8 version of Mail.app, and would prefer a version of Mail.app that works into the future.</li>
<li>Sluggishness: even after enabling its offline support and telling it to cache all my folders, selecting any message the first time is still sluggish, like it wasn&rsquo;t cached until I clicked on it. The normal flow is new mail arrives and I can see it in the message list, I click on it, then nothing happens for a second or two.</li>
<li>Key bindings: Mac OS accepts Emacs keybindings (things like Ctrl-n for down arrow) systemwide, but not in Postbox.</li>
<li>No springloaded autocollapse for dragging and dropping messages to nested folders.</li>
<li>Aesthetically: it&rsquo;s just not as nice as Mail.app.</li>
</ul>


<p><a href="http://airmailapp.com/">Airmail</a>:</p>

<ul>
<li>Doesn&rsquo;t show me all my mail. This is, obviously, a dealbreaker. I clicked around a bunch of different folders, and it only showed me a small recent smattering of messages in folders other than the inbox (for my Sent folder, only stuff for the last 2 weeks; for a lower-traffic folder, it went back about 30 months but only about 20 messages; in all cases it’s far less than the number of messages actually there).</li>
<li>Polarizing UI. Some people seem to love it. To me, it just looks weird (dark colors, unfamiliar icon glyphs, unlabelled icons all over the place including parts of windows that don&rsquo;t normally have buttons, busy menu structure).</li>
<li>Weird behavior with nested folders. The toplevel folders are sorted alphabetically (as one would expect); so are first-level nested folders. But folders nested more deeply than that show in an apparently arbitrary order.</li>
</ul>


<p>For now, I&rsquo;m sticking with OS X 10.8.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>Notably, Mail.app is the only client I&rsquo;ve ever used that makes IMAP feel perfectly natural, hiding all its design foibles. Other clients want to only download headers until I actually click on a message, or make me configure which folders get cached locally, or expose a difference between &ldquo;delete&rdquo; and &ldquo;expunge&rdquo;. Mail.app&rsquo;s default settings just cache the whole IMAP mailstore in the background and make it feel like all the mail is local.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>I upgraded some machines I can live without, to see how well Mavericks works. I wasn&rsquo;t expecting any problems this big. But luckily I didn&rsquo;t upgrade the laptop I do use every day, which I need for my job; unluckily that machine is the one that would benefit the most from Mavericks banner features: better power management and better multi-monitor support.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/08/death-by-dueling-modal-dialog/">Death by Dueling Modal Dialog</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-08T23:35:00-08:00" pubdate data-updated="true">Dec 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/08/death-by-dueling-modal-dialog/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Setting up a new iPad from a backup of a previous one &mdash; which, I think, is the method de rigeur for a few million people in this season &mdash; I noticed a really annoying problem.</p>

<p>When you first turn on the new device, runs a fullscreen setup program that is not the normal iOS user experience starting at the home screen (Springboard). It wants to connect to a Wi-Fi network and then it asks you if you want to set it up as a new device or from a backup (and if the latter, whether to restore from iCloud or iTunes). If you elect to restore from an iCloud backup, it chews away for a few minutes restoring your user account, then reboots, and asks you a few further questions in the fullscreen setup program before jumping to the home screen.</p>

<p>As soon as the setup program exits and Springboard runs, normal background services and apps start launching and doing their thing, plus there&rsquo;s still some first-use setup stuff to take care of, which means that all of the following try to happen simultaneously:</p>

<ul>
<li>email accounts try to sync, realize they don&rsquo;t have the server credentials, and ask you for a password (for each of several email accounts)</li>
<li>iOS wants you to set a device PIN for the unlock screen, and asks you to provide one</li>
<li>Facebook account tries to sync, realizes it doesn&rsquo;t have the server credentials, and asks you for a password</li>
<li>if you managed to supply a device PIN without that dialog getting clobbered by one of the other ones, it comes back and wants you to confirm it</li>
<li>if you managed to supply your Facebook password, Facebook&rsquo;s 2-factor authentication says &ldquo;that&rsquo;s nice but we just texted you a code which you now need to provide&rdquo;</li>
</ul>


<p>All of these happen in modal dialogs that pop to the foreground over the active app&hellip; or over one of the other aforementioned modal dialogs. This isn&rsquo;t supposed to happen with modal dialogs. But it does, here, in the default out-of-box experience for pretty much any iOS device where the owner is upgrading from a previous one that was used for anything serious.</p>

<p>In fact, these password dialogs continue to pop up even when you&rsquo;re in the middle of typing in an existing one (and if you manage to fill out and confirm one before another one takes its place, it seems like the previous ones may still be there with your previous partial input, or they may start empty when they reappear). The resultant focus stealing issues are worse than anything I&rsquo;ve seen since the late 90s versions of Windows.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/08/apple-2-factor-authentication-setup/">2-factor Authentication Setup for AppleID</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-08T23:16:00-08:00" pubdate data-updated="true">Dec 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/08/apple-2-factor-authentication-setup/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>As part of setting up my new iPad, I got tired of telling Apple I didn&rsquo;t want to add weak security questions to allow me (or would-be hackers) to reset my password, and decided to set up 2-factor authentication (which is a good idea in any case).</p>

<p>This should be pretty straightforward &mdash; and it is, at other sites where I&rsquo;ve set this up (Google, Facebook, Twitter). Apple&rsquo;s setup process was a lot more complicated. Judging from the questions and admonishments during this setup process, Apple is a lot more worried than these others about people losing access to the &ldquo;thing you have&rdquo; and locking themselves out of their accounts. Which is a legitimate concern, but I think they can make the UI around this process a lot better.</p>

<p>The first place this went awry is the list of devices where they can deliver authentication codes. The AppleID website shows a list of known iOS devices (those enrolled in &ldquo;Find my iPhone&rdquo;), and allows you to select any/all of these, plus optionally one or more SMS-enabled phone numbers, to receive login verification codes. The problem is, all of these devices were listed as &ldquo;offline&rdquo;, even though at least 3 of them were actually online. I spent some time trying to figure out which parts of the description was clickable (spoiler: none, though there is one part that triggers an inaccurate explanatory popup if you mouse over it and hold still) before I eventually discovered a Refresh button at the very bottom of the list (far enough down I had to scroll to see it).</p>

<p>So beef #1: this page always loads stale information, and doesn&rsquo;t show you correct information until you click a Refresh button that&rsquo;s initially offscreen.</p>

<p>After selecting a couple notification methods here (which involves additional careful confirmation to make sure they actually work) and clicking Next, Apple showed me a &ldquo;recovery key&rdquo; with instructions to write it down or print it, but not to store it on any computer (and to enforce that, they make it impossible to copy it to the clipboard). OK guys, I get what you&rsquo;re saying about the whole point being not exposing my keys to hackers, but if I write it on paper I&rsquo;m going to lose it. Plus the computer I&rsquo;m on doesn&rsquo;t have a printer. I&rsquo;m going to store this on my computer, thanks; I&rsquo;ll just encrypt it. So I pull out my iPhone and open an encrypted note-taking program and type in this long alphanumeric code and check it carefully to make sure I transcribed it correctly. Then back to the computer and I click Next and it starts to ask me to retype the code, when suddenly&hellip; Session Timeout! Back to the very beginning. Time to start over (and this has taken about 10 minutes so far<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>).</p>

<p>So beef #2: aggressively short<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup> session timeouts are user-hostile, plus why not give me a chance to confirm I&rsquo;m still there before just kicking me out of the session, plus the website was willing to let me sit there at the first &ldquo;recovery key&rdquo; page indefinitely long, and let me keep doing the work to copy down the useless recovery key<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>, and only when I click Next does it tell me the session had already expired.</p>

<p>This whole process would work a lot better if the 2 pages in question would dynamically update. AJAX in 2006 was pretty hot stuff. In late 2013, it&rsquo;s table stakes.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>OK, it won&rsquo;t take me 10 minutes the second time, now that I know what I&rsquo;m doing, notably with respect to the magic refresh button. But still, there was a lot of clicking done so far and a lot of clicking to repeat, and it&rsquo;s pretty annoying.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>The session timeout wasn&rsquo;t actually so short that I couldn&rsquo;t transcribe the recovery key, annoying as it is to type arbitrary hyphenated alphanumeric strings into the iOS keyboard. What actually happened was the AppleID website was slow and the page load between the &ldquo;configure devices&rdquo; and &ldquo;recovery key&rdquo; page took long enough I went to go do something else for a few minutes, then came back to the &ldquo;recovery key&rdquo; page, at which point the session had probably already expired before I even started dealing with transcribing the key.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>Useless, because the second time through, the randomly generated recovery key was of course different.<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/08/apple-shopping-cart-fail-gift-card-in-cart/">Apple Shopping Cart Fail — Gift Card in Cart Makes Gift Card Payment Option Disappear</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-08T22:43:00-08:00" pubdate data-updated="true">Dec 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/08/apple-shopping-cart-fail-gift-card-in-cart/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>On Black Friday I was trying to buy 2 new iPads to upgrade our 2 old ones.</p>

<p>And I&rsquo;d been lucky enough to win an iPad 2, which turned into an Apple Store gift card for the value of an iPad 2, as a door prize recently.</p>

<p>And <a href="/blog/2013/12/08/everything-but-the-retina-mini/">Apple was giving out Apple Store gift cards with most iPads as a Black Friday promotion that day</a>.</p>

<p>So I added the new desired iPads to the shopping cart, configured them appropriately, clicked along until I got to the payment page, started looking for where to enter the code from my existing gift card&hellip; and this started a 15-minute odyssey of reading Apple help pages and becoming convinced the <a href="http://en.wikipedia.org/wiki/Negroni">holiday cocktail</a> I was sipping had addled my brain.</p>

<p>I mean, this is not supposed to be hard. But I couldn&rsquo;t find anywhere to tell it I had this gift card.</p>

<p>First stop: Apple&rsquo;s help page describing <a href="http://store.apple.com/us/browse/home/giftcards/redeem">How to redeem Apple Store gift cards</a>.</p>

<p><a href="http://www.flickr.com/photos/metamatt/11232695394/"><img src="http://farm4.staticflickr.com/3669/11232695394_85ffb02ea2_o.png" alt="Click the &quot;Apple Store Gift Card tab&quot;" /></a></p>

<p>That sounds straightforward enough, but that&rsquo;s funny, I don&rsquo;t see any such option:</p>

<p><a href="http://www.flickr.com/photos/metamatt/11232795053/"><img src="http://farm4.staticflickr.com/3699/11232795053_3c833b5a34_c.jpg" alt="Payment page with no &quot;gift card&quot; tab" /></a></p>

<p>I delve farther into <a href="http://store.apple.com/us/help/payments#applecard">other more detailed help pages</a>, to no avail.</p>

<p>Finally, feeling pretty stupid and blaming the cocktail, I clicked the &ldquo;Live chat&rdquo; help button. That popped up this window:</p>

<p><a href="http://www.flickr.com/photos/metamatt/11232695584/"><img src="http://farm8.staticflickr.com/7444/11232695584_27f55ece66_c.jpg" alt="Please wait / Top Questions" /></a></p>

<p>And there you have it. Q: &ldquo;How do I use a Gift Card?&rdquo; A: &ldquo;Well, we don&rsquo;t let you use gift cards on orders containing gift cards, and by the way, all orders today contain gift cards, so have fun trying to use a gift card. This was a sufficiently obvious question to make the #1 FAQ of the day, but we&rsquo;ll only tell you this after you get frustrated enough to ask for help.&rdquo;</p>

<p>This was a lot more confusing than it would have been if the &ldquo;gift card&rdquo; tab had remained present, which when selected would have been a perfect opportunity to say why this order wasn&rsquo;t eligible for payment via gift card.</p>

<p>Pro tip for UI designers: making sometimes-applicable-but-not-now options disappear entirely is a lot less friendly than leaving room to explain why they don&rsquo;t currently apply.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/08/apple-shopping-cart-fail-multiple-devices-on-new-cell-plan/">Apple Shopping Cart Fail — Multiple Devices on New Cell Plan</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-08T22:25:00-08:00" pubdate data-updated="true">Dec 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/08/apple-shopping-cart-fail-multiple-devices-on-new-cell-plan/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I was trying to buy new phones for everyone on our family plan — we had 2-year-old iPhone 4Ses on Sprint, and were planning on getting new iPhone 5Ses on Verizon.</p>

<p>My first stop was store.apple.com, because Apple&rsquo;s website (compared to cell carrier websites) is simple<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> and easy to use and doesn&rsquo;t make you want to gouge your eyes out and doesn&rsquo;t try to upsell you multiple useless accessories during the checkout process.</p>

<p>Then I hit this roadblock:</p>

<p><a href="http://www.flickr.com/photos/metamatt/11232705516/"><img src="http://farm8.staticflickr.com/7323/11232705516_37ec93131d_c.jpg" alt="You can only purchase one iPhone per order on the Apple Online Store" /></a></p>

<p>This was annoying because at the time (October) there was a 2 to 3 week waiting list for iPhone 5Ses. Presumably this 1-phone-per-order thing isn&rsquo;t a problem in physical stores, but due to the backlog they weren&rsquo;t actually stocking the phones in physical stores; you had to pre-order via the website. And the website&rsquo;s solution was to order one phone, wait for it to arrive and activate it, then there&rsquo;s enough of an account set up to add more phones to a family plan. But that would involve doubling the wait time, plus initially ordering a different plan than I want to end up on, and switching midmonth, which would probably involve who-knows-what kind of prorating madness. And then the phones wouldn&rsquo;t all have the same contract date, which would haunt us 2 years from now. No thanks.</p>

<p>I don&rsquo;t actually know what the reason is for this, that renders Apple unable to sell multiple phones to new customers. It doesn&rsquo;t really make sense to me; that doesn&rsquo;t seem like a strange thing to want.</p>

<p>Anyway, the solution was to head off to Verizon&rsquo;s website, and just hold my tongue and avoid gouging my eyeballs out when confronted with their idea of website design and the multiple clicks <em>per line</em> to skip buying a bunch of accessories I didn&rsquo;t need. But they were happy to let me sign up as a new customer and ship me 4 phones at once.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>This is admittedly less true when buying a carrier-subsidized iPhone than anything else in the entire Apple Store. Everything else, you say you want to buy it and then you pay for it. A subsidized iPhone involves entering all sorts of billing information for your current contract plan or all sorts of loan-application-style information to set up a new contract plan. I can only imagine what kind of backend integration was necessary to get Apple&rsquo;s store talking to all the cell networks&#8217; billing systems.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/08/unexpected-side-effects-switching-cell-phone-providers/">Unexpected Side Effects Switching Cell Phone Providers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-08T22:14:00-08:00" pubdate data-updated="true">Dec 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/08/unexpected-side-effects-switching-cell-phone-providers/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I wanted to note that when switching cell phone providers, one source of trouble I had not expected was the non-portable email address associated with my phone number for email-to-SMS forwarding.</p>

<p>Sprint has an email-to-SMS gateway that forwards messages sent to yournumber@messaging.sprintpcs.com. Verizon does the same thing using yournumber@vtext.com.</p>

<p>I was using this mechanism for a smattering of services that know how to send notifications by email but either don&rsquo;t know how or charge extra for sending SMSes:</p>

<ul>
<li><a href="https://www.pingdom.com/">Pingdom</a> web service monitoring</li>
<li><a href="http://www.eyezon.com/?page_id=176">Eyez-on Envisalink</a> alarm monitoring</li>
<li><a href="https://github.com/metamatt/stargate">Custom software I wrote</a> that generates more interesting alerts from the alarm system data (like, it messages me if I leave the garage door open)</li>
</ul>


<p>All of these alerts stopped happening when I switched providers, and I only noticed when I realized I wasn&rsquo;t getting the alerts any more. Then I had to go back and try to remember everywhere I&rsquo;d used that messaging.sprintpcs.com address (hint: this took a couple iterations).</p>

<p>A different case that ended up working out the same way is <a href="https://support.twitter.com/articles/14014-twitter-via-sms-faqs">Twitter&rsquo;s SMS integration</a>. Here, they have real support for SMS (not cheaping out and using a per-carrier email forwarding gateway). But it still broke, with the same symptoms, when I switched carriers: over time, I realized I was no longer getting SMS notifications I used to get. I don&rsquo;t know how Twitter&rsquo;s SMS integration is implemented, and whether they do it themselves or use some service like Twilio; unlike a lot of sites I&rsquo;ve seen that ask you for a phone number to SMS, they just ask for a phone number and not which carrier. Anyway, it broke and there was no obvious setting to change to fix it; I ended up deleting my phone number and re-adding it and that fixed things.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/08/state-of-the-last-mile-internet-connection-year-2013/">State of the Last-mile Internet Connection, Year 2013</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-08T21:26:00-08:00" pubdate data-updated="true">Dec 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/08/state-of-the-last-mile-internet-connection-year-2013/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>At home: Using both Comcast and <a href="http://www.monkeybrains.net/">Monkeybrains</a> for their different strengths.</p>

<ul>
<li>Comcast (aka &ldquo;the man&rdquo;): I&rsquo;m using what used to be a 30mbps down/7mbps up DOCSIS 3 connection with an onstensible 250GB/month cap for $74.95/month (ostensibly $62.95/month but with a surcharge for not buying additional services from them). Last year they removed even the threat of overage charges for exceeding the cap (this may change someday but it&rsquo;s nice for now), and sometime this year they seem to have also stopped shaping my traffic to the 30mbps tier; I now reliably get about 55mbps down and 10mbps up. (DOCSIS cable is a shared medium where you fight your neighbors for bandwidth, but I have never once seen speeds drop below the shaping cap; either Comcast does a good job of provisioning enough capacity or I&rsquo;m extraordinarily lucky.) I don&rsquo;t love Comcast&rsquo;s corporate policies, the fact they&rsquo;re always trying to upsell me TV services I don&rsquo;t want, or their &ldquo;have you tried rebooting it&rdquo; approach to tech support. But their network works well.</li>
<li>Monkeybrains (a San Francisco local neighborhood provider): Their plan for non-businesses is $35/month over 5GHz point-to-multipoint wireless links, using roof-mounted <a href="http://www.ubnt.com/airmax#nanobridgem">Ubiquiti 5GHz dish antennas</a>. I hadn&rsquo;t realized equipment like this was generally available, or that you could do reliable long-distance wireless links in unlicensed spectrum. It works pretty well. Non-business customers get a shared medium symmetric link; Monkeybrains tells you to expect somewhere around 20mbps in each direction if you&rsquo;re lucky but less if the link is poor or congested. In practice, it&rsquo;s been reliable except during one storm, and I do get about 20mbps in each direction most of the time, though in the evenings when everyone is watching Netflix, I&rsquo;ve seen it drop to about 3mbps (so here, the shared medium effect is often visible). Also, latency is very good (around 4ms for the last-mile hop); far better than I&rsquo;ve ever seen from cable or DSL. I chose to get the additional Monkeybrains connection for 3 reasons: first to see if it could completely replace cable, second for redundancy and additional capacity especially upstream, and third to support a local business. Given the speed characteristics, it&rsquo;s a great value for upstream capacity (over the course of a month, ignoring nightly slowdowns, I could transfer more up through Monkeybrains than even a much more expensive Comcast connection), but it&rsquo;s often not good enough for streaming video in the evening, so I haven&rsquo;t chosen to replace cable entirely.</li>
<li>Configuring multiple WAN providers is hard. I have my <a href="http://blog.metamatt.com/blog/2012/03/19/custom-built-linux-router-no-thanks-to-realtek/">custom Linux router</a> and I&rsquo;m configuring the firewall, shaping, and routing via <a href="http://shorewall.net/">shorewall</a>. I find Shorewall a lot easier to deal with than raw <a href="http://linux.die.net/man/8/tc">tc</a> and <a href="http://www.netfilter.org/">iptables</a>, but even after reading all of <a href="http://www.shorewall.net/MultiISP.html">Shorewall&rsquo;s Multi-ISP guide</a> and way too much of <a href="http://www.lartc.org/">LARTC</a>, I still haven&rsquo;t figured out how to configure things very well. In a perfect world, everything would use <a href="http://en.wikipedia.org/wiki/Multipath_TCP">Multipath TCP</a> or the equivalent, and adding additional WAN providers would immediately give you more speed, even for a single stream. In the real world, Multipath TCP is not widely deployed, and unless you run the equivalent of a VPN tunnel across all your links to a cooperating router elsewhere, single streams use only a single link. Also, you need fairly smart software watching the links and determining their health and reconfiguring routing if you want the ideal reliability case, where traffic flows as long as at least 1 link is healthy. I haven&rsquo;t tried all that hard, but I haven&rsquo;t even gotten this working. In practice, what&rsquo;s easy to set up leaves you with a combined link that&rsquo;s only as reliable as the weakest link: if any link goes down, at least some traffic stops flowing. I dabbled for a while in round-robining traffic across links (which is kind of like SMP for your CPU: it doesn&rsquo;t help at all with the max speed of an individual stream, but helps keep multiple streams from interfering, so with a large number of users, it&rsquo;s a decent approximation of the ideal case), but given the reliability problems and also the naive load balancing that would often result in slower individual streams by choosing the wrong link, I&rsquo;m now running only Crashplan backup over Monkeybrains, and everything else over Comcast.<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></li>
</ul>


<p>Wireless: I switched our family plan from Sprint to Verizon, despairing that Sprint&rsquo;s promised <a href="http://network.sprint.com/">&ldquo;Network Vision network upgrades</a> will ever bear fruit here in the Bay Area. I&rsquo;ve always like Sprint&rsquo;s focus on less-confusing, lower-priced plans with an emphasis on unlimited data, but Network Vision has been in progress since 2010, their 3G network has been getting slower in my experience ever since then, and their LTE network is still on the horizon. Now that they&rsquo;re finally converting Nextel&rsquo;s lower-frequency spectrum for their own purposes, this could still turn out well, but after waiting 3 years for Network Vision to yield results, I was tired of holding my breath, and I sure wasn&rsquo;t going to sign another 2 year contract under those conditions. Verizon is also The Man, but it turns out they basically don&rsquo;t charge any more for a basically equivalent<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup> 4-line family plan for 4 smartphones. So now we&rsquo;re on Verizon&rsquo;s LTE network, which ranges from awesome (20mbps down, 7mbps up) in downtown SF to barely passable (data barely trickles in each direction) around our house in the Mission District. Most of the time it works pretty well, though. Latencies on both Verizon&rsquo;s LTE and 3G networks seem substantially better than Sprint&rsquo;s 3G network (RTT on Verizon is usually around 70ms; with Sprint it was usually 200ms), which might also be a big factor in it feeling generally snappier for data. True, we had to give up unlimited data, but in practice (partly because it was so slow, partly just due to our natural usage patterns) we weren&rsquo;t using all that much data on Sprint, and given the observed tradeoff, I actually think $10/GB is a fair price to pay for reliably fast data.</p>

<p>At work: A quick mention that at work, we&rsquo;ve tried both Comcast and <a href="http://webpass.net/">WebPass</a>, another local-ish wireless provider with a focus on commercial installations. I like what WebPass is offering, because they sell symmetric connections and can scale up to quite high speeds. Unfortunately the plans that are cost-competitive with Comcast are quite a bit slower downstream, and reliability has not been all that good. The wireless link layer itself seems fine, but I&rsquo;ve seen more than a few weird routing problems, and their tech support doesn&rsquo;t reliably fix these quickly when reported or even call back with promised updates.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>I could write a whole post on weird things you didn&rsquo;t expect to deal with that crop up when you add multiple ISPs to your home network, like trying to keep the weird Xbox Live UDP protocol happy, or updating multiple dyndns addresses, or why it&rsquo;s not easy to keep Shorewall happy when one link goes down. Maybe another day.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>I found it interesting that (in the fall of 2013), Sprint&rsquo;s mainstream plans all have unlimited data and messaging but still have metered voice minutes; Verizon&rsquo;s mainstream plans all have unlimited voice and messaging but metered data.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/08/everything-but-the-retina-mini/">Everything Except the Retina Mini</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-08T15:45:00-08:00" pubdate data-updated="true">Dec 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/12/08/everything-but-the-retina-mini/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I noticed on Black Friday (the day after Thanksgiving; this year, November 29) that Apple had discounts on seemingly all of their iPad models: iPad 2, iPad Air and iPad Mini. Usually, Apple discounts prices that day (for many products, the only time they&rsquo;re ever discounted); this year, the discount took the form of a gift card for the Apple Store. Tricksy Apple &mdash; we don&rsquo;t actually get a cheaper price, we just get more for our money.</p>

<p>When I went to order the one I wanted (the new retina-display version of the iPad Mini), I realized they didn&rsquo;t have discounts on <em>quite</em> all the iPads. The &ldquo;iPad Mini with Retina Display&rdquo; is considered a different model and product than the normal &ldquo;iPad Mini&rdquo; (fair enough, I suppose) and there was no discount available.</p>

<p>My question: if Apple was discounting all other iPads including the equally-new and presumably hot-selling iPad Air, but not the Retina Mini, what does this indicate about the Retina Mini?</p>

<p>I have 2 theories:</p>

<ol>
<li><p>The Retina Mini is in such high demand and/or short supply they have no need to discount it to sell it faster than they can make it.</p></li>
<li><p>The Retina Mini is already priced much closer to breakeven, and they can&rsquo;t sell it significantly cheaper without losing money.</p></li>
</ol>


<p>I have no idea which of these (if either) is true. I will note that, having ordered both an iPad Air and an iPad Mini with Retina Display that same day (identically configured, and given the $75 near-rebate on the Air, for nearly the same price), the Mini showed up a full week before the Air. That might put a hole in theory #1. Or it might just mean that the $75-off-an-Air promotion was such a huge hit that it created a huge backlog for the Air.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/20/apple-is-getting-really-aggressive-about-this-sleepdelay-thing/">Apple Is Getting Really Aggressive About This Sleepdelay Thing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-20T09:01:00-07:00" pubdate data-updated="true">Mar 20<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/20/apple-is-getting-really-aggressive-about-this-sleepdelay-thing/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Last night I installed the OS X 10.8.3 update on my laptop (updating from 10.8.2). This morning,
upon plugging my laptop into the external Thunderbolt display as I always do, and it didn&rsquo;t wake
up when I opened the lid, nor when I started tapping on the external keyboard.</p>

<p><a href="http://blog.metamatt.com/blog/2013/02/21/speedy-resume/">As I noted before</a>, a retina MBP
(or MacBook Air) that doesn&rsquo;t immediately wake when you open the lid is annoying not only because
it slows you down, but because Apple&rsquo;s removed all the battery indicator buttons, and there&rsquo;s
absolutely no sign of life from a powered off (or hibernating) machine until you press the power
button.</p>

<p>So I woke it up with the power button on the builtin keyboard, and watched it boot to the preboot
login screen associated with an encrypted boot drive<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>, and was further annoyed that at this
screen it was still ignoring the external keyboard plugged into the Thunderbolt display. Having
to use the builtin keyboard for a docked laptop is suboptimal. Anyway.</p>

<p>When it finished booting, I fired up pmset to ask it what&rsquo;s going on, first on AC power:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>magi@duality ~&gt; pmset -g
</span><span class='line'>Active Profiles:
</span><span class='line'>Battery Power     -1
</span><span class='line'>AC Power          -1*
</span><span class='line'>Currently in use:
</span><span class='line'> standbydelay         4200
</span><span class='line'> standby              0
</span><span class='line'> womp                 1
</span><span class='line'> halfdim              1
</span><span class='line'> hibernatefile        /var/vm/sleepimage
</span><span class='line'> darkwakes            0
</span><span class='line'> gpuswitch            2
</span><span class='line'> networkoversleep     0
</span><span class='line'> disksleep            10
</span><span class='line'> sleep                0
</span><span class='line'> autopoweroffdelay    14400
</span><span class='line'> hibernatemode        3
</span><span class='line'> autopoweroff         1
</span><span class='line'> ttyskeepawake        1
</span><span class='line'> displaysleep         10
</span><span class='line'> acwake               0
</span><span class='line'> lidwake              1</span></code></pre></td></tr></table></div></figure>


<p>And then again<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup> on battery:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>magi@duality ~&gt; pmset -g
</span><span class='line'>Active Profiles:
</span><span class='line'>Battery Power     -1*
</span><span class='line'>AC Power          -1
</span><span class='line'>Currently in use:
</span><span class='line'> standbydelay         4200
</span><span class='line'> standby              1
</span><span class='line'> halfdim              1
</span><span class='line'> hibernatefile        /var/vm/sleepimage
</span><span class='line'> darkwakes            0
</span><span class='line'> gpuswitch            2
</span><span class='line'> disksleep            10
</span><span class='line'> sleep                10
</span><span class='line'> autopoweroffdelay    14400
</span><span class='line'> hibernatemode        3
</span><span class='line'> autopoweroff         1
</span><span class='line'> ttyskeepawake        1
</span><span class='line'> displaysleep         2
</span><span class='line'> acwake               0
</span><span class='line'> lidwake              1</span></code></pre></td></tr></table></div></figure>


<p>As <a href="http://blog.metamatt.com/blog/2013/02/21/speedy-resume/">posted before</a>, I&rsquo;d previously changed <code>standbydelay</code>
to 43200 seconds on battery power, and disabled <code>standby</code> entirely on AC power. Apparently the 10.8.3
upgrade reverted the former change to Apple&rsquo;s new default of 4200 seconds, though it left the latter
change alone.</p>

<p>Note that&rsquo;s not quite consistent with my observation that my rMBP (bought in 2012 and shipped with
OS X 10.8) had <code>standby</code> enabled by default, while my previous MBP (bought in 2010 and shipped with
OS X 10.6 and subsequently upgraded to 10.7 and then 10.8) never had <code>standby</code> enabled at all.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>The FileVault preboot login screen also annoys me because it&rsquo;s got a pretty poor keyboard driver, and if I type my password at natural speed, it reproducibly detects one keystroke more than I intended to make. The same sequence of keystrokes is interpreted correctly by the real OS X keyboard stack. I reported this bug to Apple and they said they know and don&rsquo;t care.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>As an aside: anyone know how to get pmset to report the profile that&rsquo;s not active? <code>pmset -g</code> reports all settings for battery when on batter, and all settings for charger/AC when plugged into AC, and I have found no way to get all settings for both profiles short of running pmset twice, and physically plugging or unplugging the power connector between runs. Note that the set mode of pmset takes an optional <code>-a</code>/<code>-b</code>/<code>-c</code> argument to specify whether to change the values for battery, charger, or both profiles, but those aren&rsquo;t honored in conjunction with <code>-g</code>.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/17/from-tumblr-to-octopress-part-3-footnotes/">From Tumblr to Octopress, Part 3: Footnotes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-17T01:42:00-07:00" pubdate data-updated="true">Mar 17<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/17/from-tumblr-to-octopress-part-3-footnotes/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Once I got Jekyll and Octopress to import my blog from Tumblr and generate it in its new format, almost everything was formatted correctly, with the marked exception of footnotes. Like a certain furious Canadian<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>, I&rsquo;ve become a fan of footnotes for adding detail without littering my posts with parenthetical expressions. In the migrated posts, the footnotes were there at the bottom, but the links to them were all wrong — full-sized unlinked numbers, instead of superscripted hyperlinks.</p>

<p>It took me a while to figure out what was wrong because there were actually 3 distinct problems. And as background, while it wasn&rsquo;t a direct problem here, you should understand that footnotes are not a feature of the <a href="http://daringfireball.net/projects/markdown/syntax">original Markdown syntax</a>, but were added later by other dialects, mostly converging around <a href="http://michelf.ca/projects/php-markdown/extra/#footnotes">PHP Markdown Extra</a>, which is what Tumblr uses.</p>

<p>First: The post content generated in Markdown format from tumblr.rb, in its trip through nokogiri and html2text and maybe elsewhere, didn&rsquo;t actually preserve the footnote declarations I&rsquo;d originally given Tumblr. Even though I had written these posts in Markdown format, and the Markdown form of my posts is presumably preserved somewhere at Tumblr<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>, tumblr.rb instead downloads HTML and then reverse-converts it back to Markdown format. This conversion doesn&rsquo;t preserve footnotes as Markdown footnotes; instead it leaves them as static HTML, and it renders the footnote bodies reasonably but the footnote links unreasonably.</p>

<p>So I had to go edit all the posts in which I used footnotes, and manually redo the footnote links using PHP Markdown Extra syntax.</p>

<p>Second: Having done that and told Jekyll to regenerate the blog, I found myself looking at a bunch of raw unconverted PHP Markdown Extra footnote tags. That&rsquo;s because Jekyll&rsquo;s markdown processing is done by RDiscount, and the version of RDiscount specified by Octopress&rsquo;s Gemfile (1.6.8) does not support footnotes at all; footnotes using PHP Markdown Extra syntax were added as a feature of RDiscount 2.0.7, as an optional extension named <code>footnotes</code>.</p>

<p>So I had to edit the Gemfile to specify RDiscount 2.0.7, and edit _config.yml to enable the footnotes extension. These changes look like:</p>

<p><code>Gemfile</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>-  gem 'rdiscount', '~&gt; 1.6.8'
</span><span class='line'>+  gem 'rdiscount', '~&gt; 2.0.7'</span></code></pre></td></tr></table></div></figure>


<p><code>_config.yml</code>:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> markdown: rdiscount
</span><span class='line'>+rdiscount:
</span><span class='line'>+  extensions: [ footnotes ]</span></code></pre></td></tr></table></div></figure>


<p>Third: Having done that and told Jekyll to regenerate the blog, some posts looked fine, but others had chunks of footnote definition content floating near the end of the post body but before the footnotes, and completely out of order. Some trial and error led me to deduce that RDiscount 2.0.7 does not actually honor the documented PHP Markdown Extra syntax, which allows you to hard-wrap the footnotes or even place the definition offset from the footnote number<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>; RDiscount is happy only if the footnote number and entire body are on one logical line with no hard line breaks. Since I&rsquo;m doing all this posting from a colocated Linux VM on which I don&rsquo;t run X, and thus use text editors in old-school terminal windows, I tend to hard-break my posts (and in fact, the posts I imported from Tumblr tended to be hard-wrapped at 76 columns by something somewhere along the write/post/import pipeline). RDiscount doesn&rsquo;t play well with these hard breaks.</p>

<p>So I had to edit all the footnoted posts again to comply with RDiscount&rsquo;s actual behavior.</p>

<p>Summary: you can get nice footnotes from Octopress/Jekyll if you</p>

<ul>
<li>Update to RDiscount 2.0.7</li>
<li>Enable RDiscount&rsquo;s footnotes extension</li>
<li>Use the footnote syntax that RDiscount actually supports, which is like PHP Markdown Extra except each footnote definition must stay on one line without hard line breaks</li>
<li>If importing your blog from a previous home using a script like tumblr.rb, verify that the conversion actually generates footnote markup</li>
</ul>


<p>There&rsquo;s still one more bug with footnotes on the index page, which is that Jekyll generates each page independently through RDiscount, which generates in-page links between the footnotes and their bodies, using the footnote number: for the first footnote, the forward link is <code>#fn:1</code> and the backward link is <code>#fnref:1</code>. This works fine on individual pages, but on the index page the footnote numbers get reused and collide, so the in-page links don&rsquo;t work there. Syeong Gan has a post with <a href="http://syeong.jcsg.com/2012/07/07/octopress-footnote-problem/">a deeper description of this problem, and a possible workaround</a>.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p><a href="http://canadian-fury.com/2012/04/26/footnotify-and-octopress/">Footnotes, Footnotify and Octopress</a> has a pretty good argument in favor of footnotes, as well as a point-in-time description of how to get them to work in Octopress which I think is now outdated: he suggests switching from RDiscount to Kramdown; as mentioned above, RDiscount 2.0.7 added footnote support which mostly works. I tried Kramdown anyway and found RDiscount to do a slightly less bad job of honoring PHP Markdown Extra syntax than Kramdown does.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>MarsEdit can edit posts already posted at Tumblr, even if not originally authored with MarsEdit, in their original format: if the post was written in Markdown, MarsEdit&rsquo;s edit view sees Markdown. This might imply that there&rsquo;s a better way for Jekyll&rsquo;s tumblr.rb to use the Tumblr API to get the Markdown source, instead of the reverse-conversion it currently does.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>See the PHP Markdown Extra <a href="http://michelf.ca/projects/php-markdown/extra/#footnotes">documentation on footnotes</a>, notably the part starting with &ldquo;Footnotes can contain block-level elements&rdquo;.<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/12/08/mail-dot-app-gmail-and-mavericks/">Mail.app and gmail in Mavericks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/08/death-by-dueling-modal-dialog/">Death by dueling modal dialog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/08/apple-2-factor-authentication-setup/">2-factor authentication setup for AppleID</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/08/apple-shopping-cart-fail-gift-card-in-cart/">Apple shopping cart fail — gift card in cart makes gift card payment option disappear</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/08/apple-shopping-cart-fail-multiple-devices-on-new-cell-plan/">Apple shopping cart fail — multiple devices on new cell plan</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/metamatt">@metamatt</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'metamatt',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("metamatt", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/metamatt" class="twitter-follow-button" data-show-count="false">Follow @metamatt</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/117348958487049022391?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Matt Ginzton -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'metamatt';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
